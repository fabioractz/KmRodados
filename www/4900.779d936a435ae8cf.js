"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4900],{4900(T,y,r){r.d(y,{SupplyHistoryPageModule:()=>G});var m=r(2200),f=r(4341),a=r(7343),d=r(8132),_=r(467),g=r(2855),t=r(3664),u=r(2615),h=r(9198),v=r(5355),S=r(6991);function F(e,s){1&e&&(t.j41(0,"div",4)(1,"p"),t.EFF(2,"Nenhum abastecimento registrado."),t.k0s()())}function P(e,s){if(1&e&&(t.j41(0,"p")(1,"strong"),t.EFF(2,"Abastecimento:"),t.k0s(),t.EFF(3),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(3),t.SpI(" ",i.tipoAbastecimento)}}function j(e,s){if(1&e&&(t.j41(0,"p")(1,"strong"),t.EFF(2,"Posto:"),t.k0s(),t.EFF(3),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(3),t.SpI(" ",i.gasStation)}}function H(e,s){if(1&e){const i=t.RV6();t.j41(0,"p")(1,"strong"),t.EFF(2,"Od\xf4metro:"),t.k0s(),t.j41(3,"span",11),t.bIt("click",function(o){u.eBV(i);const l=t.XpG(3);return u.Njj(l.ajuda_odometro.mostrarAjudaOdometro(o))}),t.EFF(4,"?"),t.k0s(),t.EFF(5),t.k0s()}if(2&e){const i=t.XpG().$implicit;t.R7$(5),t.SpI(" ",i.odometer," km ")}}function b(e,s){if(1&e&&(t.j41(0,"p"),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Lme(" ",i.liters,"L - R$ ",t.i5U(2,2,i.totalValue,"1.2-2")," ")}}function $(e,s){if(1&e&&(t.j41(0,"p")(1,"em"),t.EFF(2),t.k0s()()),2&e){const i=t.XpG().$implicit;t.R7$(2),t.JRh(i.observations)}}function k(e,s){if(1&e){const i=t.RV6();t.j41(0,"ion-item")(1,"ion-label")(2,"h2"),t.EFF(3),t.j41(4,"small"),t.EFF(5),t.k0s()(),t.j41(6,"p")(7,"strong"),t.EFF(8,"Data:"),t.k0s(),t.EFF(9),t.nI1(10,"date"),t.k0s(),t.DNE(11,P,4,1,"p",3)(12,j,4,1,"p",3)(13,H,6,1,"p",3)(14,b,3,5,"p",3)(15,$,3,1,"p",3),t.k0s(),t.j41(16,"ion-buttons",6)(17,"ion-button",7),t.bIt("click",function(){const o=u.eBV(i).$implicit,l=t.XpG(2);return u.Njj(l.editar_abastecimento(o))}),t.nrm(18,"ion-icon",8),t.k0s(),t.j41(19,"ion-button",9),t.bIt("click",function(){const o=u.eBV(i).$implicit,l=t.XpG(2);return u.Njj(l.remover_abastecimento(o))}),t.nrm(20,"ion-icon",10),t.k0s()()()}if(2&e){const i=s.$implicit;t.R7$(3),t.SpI("",i.vehicleModel," "),t.R7$(2),t.SpI("(",i.vehiclePlate,")"),t.R7$(4),t.SpI(" ",t.i5U(10,8,i.date,"dd/MM/yyyy")),t.R7$(2),t.Y8G("ngIf",i.tipoAbastecimento),t.R7$(),t.Y8G("ngIf",i.gasStation),t.R7$(),t.Y8G("ngIf",i.odometer),t.R7$(),t.Y8G("ngIf",i.liters&&i.totalValue),t.R7$(),t.Y8G("ngIf",i.observations)}}function R(e,s){if(1&e&&(t.j41(0,"ion-list"),t.DNE(1,k,21,11,"ion-item",5),t.k0s()),2&e){const i=t.XpG();t.R7$(),t.Y8G("ngForOf",i.supplies)}}const I=[{path:"",component:(()=>{var e;class s{constructor(n,o,l,p,c){this.vehicleService=n,this.ajuda_odometro=o,this.route=l,this.alertCtrl=p,this.modalCtrl=c,this.supplies=[],this.vehicles=[],this.placaFiltrada=null}ngOnInit(){this.placaFiltrada=this.route.snapshot.queryParamMap.get("plate"),this.vehicleService.getVehicles().subscribe(n=>{this.vehicles=n,this.supplies=this.flattenSupplies(n,this.placaFiltrada)})}flattenSupplies(n,o){const l=[];return n.forEach(p=>{o&&p.plate!==o||p.supplies&&p.supplies.forEach(c=>{l.push({...c,vehicleModel:p.model,vehiclePlate:p.plate})})}),l.sort((p,c)=>new Date(c.date).getTime()-new Date(p.date).getTime())}editar_abastecimento(n){var o=this;return(0,_.A)(function*(){const l=o.vehicles.find(x=>x.plate===n.vehiclePlate);if(!l)return;const p=yield o.modalCtrl.create({component:g.K,componentProps:{vehicles:o.vehicles,editingSupply:n,editingVehiclePlate:l.plate}});yield p.present();const{data:c}=yield p.onWillDismiss();c&&c.saved&&(o.supplies=o.flattenSupplies(o.vehicles,o.placaFiltrada))})()}remover_abastecimento(n){var o=this;return(0,_.A)(function*(){if(!n.id)return;const l=o.vehicles.find(c=>c.plate===n.vehiclePlate);l&&(yield(yield o.alertCtrl.create({header:"Confirmar exclus\xe3o",message:"Deseja realmente excluir este abastecimento?",buttons:[{text:"Cancelar",role:"cancel"},{text:"Excluir",role:"destructive",handler:()=>{o.vehicleService.removerAbastecimento(l.plate,n.id),o.supplies=o.flattenSupplies(o.vehicles,o.placaFiltrada)}}]})).present())})()}}return(e=s).\u0275fac=function(n){return new(n||e)(t.rXU(h.K),t.rXU(v.k),t.rXU(S.nX),t.rXU(a.hG),t.rXU(a.W3))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-supply-history"]],standalone:!1,decls:9,vars:2,consts:[["slot","start"],["defaultHref","/tabs/home","text","Voltar"],["class","ion-padding ion-text-center",4,"ngIf"],[4,"ngIf"],[1,"ion-padding","ion-text-center"],[4,"ngFor","ngForOf"],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","name","create-outline"],["fill","clear","color","danger",3,"click"],["slot","icon-only","name","trash-outline"],["tabindex","0",1,"icone-ajuda-odometro",3,"click"]],template:function(n,o){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.nrm(3,"ion-back-button",1),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Hist\xf3rico de Abastecimentos"),t.k0s()()(),t.j41(6,"ion-content"),t.DNE(7,F,3,0,"div",2)(8,R,2,1,"ion-list",3),t.k0s()),2&n&&(t.R7$(7),t.Y8G("ngIf",0===o.supplies.length),t.R7$(),t.Y8G("ngIf",o.supplies.length>0))},dependencies:[m.Sq,m.bT,a.Jm,a.QW,a.W9,a.eU,a.iq,a.uz,a.he,a.nf,a.BC,a.ai,a.el,m.QX,m.vh],encapsulation:2}),s})()}];let E=(()=>{var e;class s{}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=u.G2t({imports:[d.iI.forChild(I),d.iI]}),s})(),G=(()=>{var e;class s{}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=u.G2t({imports:[m.MD,f.YN,a.bv,E]}),s})()}}]);