"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6962],{5355(E,F,h){h.d(F,{k:()=>s});var v=h(467),V=h(7343),r=h(2200),f=h(2615),g=h(3664);let P=(()=>{var e;class n{}return(e=n).\u0275fac=function(c){return new(c||e)},e.\u0275cmp=g.VBU({type:e,selectors:[["app-ajuda-odometro-popover"]],decls:2,vars:0,consts:[[1,"conteudo-ajuda-odometro"]],template:function(c,m){1&c&&(g.rj2(0,"div",0),g.EFF(1," Od\xf4metro \xe9 o indicador que registra a quilometragem total do ve\xedculo desde zero. Voc\xea pode ver esse n\xfamero no painel, pr\xf3ximo ao veloc\xedmetro. "),g.eux())},dependencies:[r.MD,V.bv],encapsulation:2}),n})(),s=(()=>{var e;class n{constructor(c){this.controlador_popover=c}mostrarAjudaOdometro(c){var m=this;return(0,v.A)(function*(){yield(yield m.controlador_popover.create({component:P,event:c,side:"right",alignment:"center",showBackdrop:!1,cssClass:"popover-ajuda-odometro"})).present()})()}}return(e=n).\u0275fac=function(c){return new(c||e)(f.KVO(V.IE))},e.\u0275prov=f.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),n})()},6962(E,F,h){h.d(F,{VehiclesPageModule:()=>z});var v=h(2200),V=h(4341),r=h(7343),f=h(8132),g=h(467),P=h(5079),s=h(5873),e=h(3664),n=h(2615),o=h(9198),c=h(6991),m=h(5355);function j(l,p){if(1&l){const a=e.RV6();e.j41(0,"span",29),e.bIt("click",function(i){n.eBV(a);const u=e.XpG(3);return i.stopPropagation(),n.Njj(u.ajuda_odometro.mostrarAjudaOdometro(i))}),e.EFF(1,"?"),e.k0s()}}function y(l,p){if(1&l&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"Obs:"),e.k0s(),e.EFF(3),e.k0s()),2&l){const a=e.XpG().$implicit;e.R7$(3),e.SpI(" ",a.observations)}}function C(l,p){if(1&l){const a=e.RV6();e.j41(0,"ion-card",13),e.bIt("click",function(){const i=n.eBV(a).$implicit,u=e.XpG(2);return n.Njj(u.abrirPaginaAcoesVeiculo(i))}),e.j41(1,"div",14),e.bIt("click",function(i){return n.eBV(a),n.Njj(i.stopPropagation())}),e.j41(2,"ion-button",15),e.bIt("click",function(){const i=n.eBV(a).$implicit,u=e.XpG(2);return n.Njj(u.setDefault(i))}),e.nrm(3,"ion-icon",16),e.j41(4,"span",17),e.EFF(5),e.k0s()(),e.j41(6,"ion-button",15),e.bIt("click",function(){const i=n.eBV(a).$implicit,u=e.XpG(2);return n.Njj(u.editVehicle(i))}),e.nrm(7,"ion-icon",18),e.j41(8,"span",17),e.EFF(9),e.k0s()(),e.j41(10,"ion-button",19),e.bIt("click",function(){const i=n.eBV(a).$implicit,u=e.XpG(2);return n.Njj(u.deleteVehicle(i))}),e.nrm(11,"ion-icon",20),e.j41(12,"span",17),e.EFF(13),e.k0s()()(),e.j41(14,"ion-card-content")(15,"div",21)(16,"div",22),e.nrm(17,"ion-icon",23),e.k0s(),e.j41(18,"div",24)(19,"h2"),e.EFF(20),e.k0s()(),e.j41(21,"div",25)(22,"div",26)(23,"p")(24,"strong"),e.EFF(25,"Tipo:"),e.k0s(),e.EFF(26),e.k0s(),e.j41(27,"p")(28,"strong"),e.EFF(29,"Placa:"),e.k0s(),e.EFF(30),e.nI1(31,"uppercase"),e.k0s(),e.j41(32,"p")(33,"strong"),e.EFF(34,"Od\xf4metro (Inicial):"),e.k0s(),e.DNE(35,j,2,0,"span",27),e.EFF(36),e.nI1(37,"number"),e.k0s(),e.j41(38,"p")(39,"strong"),e.EFF(40,"Consumo (Inicial):"),e.k0s(),e.EFF(41),e.nI1(42,"number"),e.k0s(),e.j41(43,"p")(44,"strong"),e.EFF(45,"Observa\xe7\xf5es:"),e.k0s(),e.EFF(46),e.k0s()()()(),e.DNE(47,y,4,1,"p",28),e.k0s()()}if(2&l){const a=p.$implicit,t=e.XpG(2);e.R7$(2),e.BMQ("aria-label",a.isDefault?"Ve\xedculo padr\xe3o":"Definir como ve\xedculo padr\xe3o")("title",a.isDefault?"Ve\xedculo padr\xe3o":"Definir como ve\xedculo padr\xe3o")("aria-pressed",a.isDefault),e.R7$(),e.Y8G("name",a.isDefault?"star":"star-outline")("color",a.isDefault?"warning":"medium"),e.R7$(2),e.JRh(a.isDefault?"Ve\xedculo padr\xe3o":"Definir como ve\xedculo padr\xe3o"),e.R7$(),e.BMQ("aria-label","Editar "+a.model)("title","Editar "+a.model),e.R7$(3),e.SpI("Editar ",a.model),e.R7$(),e.BMQ("aria-label","Excluir "+a.model)("title","Excluir "+a.model),e.R7$(3),e.SpI("Excluir ",a.model),e.R7$(4),e.Y8G("name",t.getVehicleIcon(a.type)),e.R7$(3),e.JRh(a.model),e.R7$(6),e.SpI(" ",t.getVehicleTypeName(a.type)||"-"),e.R7$(4),e.SpI(" ",a.plate?e.bMT(31,21,a.plate):"-"),e.R7$(5),e.Y8G("ngIf",null!=a.odometer),e.R7$(),e.SpI(" ",null!=a.odometer?e.bMT(37,23,a.odometer)+" km":"-"," "),e.R7$(5),e.SpI(" ",null!=a.consumption?e.i5U(42,25,a.consumption,"1.2-2")+" km/L":"-"),e.R7$(5),e.SpI(" ",a.observations?a.observations:"-"),e.R7$(),e.Y8G("ngIf",a.observations)}}function I(l,p){if(1&l&&(e.j41(0,"div",11)(1,"h3"),e.EFF(2,"Meus Ve\xedculos"),e.k0s(),e.DNE(3,C,48,28,"ion-card",12),e.k0s()),2&l){const a=e.XpG();e.R7$(3),e.Y8G("ngForOf",a.vehicles)}}let M=(()=>{var l;class p{constructor(t,i,u,d,_,b){this.vehicleService=t,this.router=i,this.actionSheetCtrl=u,this.alertCtrl=d,this.toastCtrl=_,this.ajuda_odometro=b,this.vehicles=[],this.vehicleType="",this.vehicleModel="",this.vehicleConsumption=null,this.vehicleOdometer=null,this.vehiclePlate="",this.vehicleObservations="",this.isFormVisible=!1,this.editingPlate=null,(0,P.a)({"car-sport-outline":s.JOI,"car-outline":s.hsd,"bus-outline":s.zRK,close:s.VNx,star:s.d49,"star-outline":s.zV,"create-outline":s.hmR,"trash-outline":s.P1A,"color-fill-outline":s.ps3,"construct-outline":s.C0N,"calculator-outline":s.N0h,"gas-station":"assets/icon/gas-station.svg",speedometer:s.wS5})}ngOnInit(){this.vehicleService.getVehicles().subscribe(t=>{this.vehicles=t})}getVehicleTypeName(t){return this.vehicleService.getVehicleTypeName(t)}getVehicleIcon(t){return this.vehicleService.getVehicleIcon(t)}openVehicleTypeSelector(){var t=this;return(0,g.A)(function*(){yield(yield t.actionSheetCtrl.create({header:"Selecione o Tipo de Ve\xedculo",buttons:[{text:"Carro",icon:"car-sport-outline",handler:()=>{t.vehicleType="car"}},{text:"Moto",icon:"moto-custom",handler:()=>{t.vehicleType="motorcycle"}},{text:"Caminh\xe3o",icon:"truck-heavy",handler:()=>{t.vehicleType="truck"}},{text:"\xd4nibus",icon:"bus-outline",handler:()=>{t.vehicleType="bus"}},{text:"Van",icon:"car-outline",handler:()=>{t.vehicleType="van"}},{text:"Cancelar",icon:"close",role:"cancel"}]})).present()})()}goToSupply(t){this.router.navigate(["/tabs/home"],{queryParams:{action:"supply",plate:t.plate,source:"vehicles"}})}goToMaintenance(t){this.router.navigate(["/tabs/home"],{queryParams:{action:"maintenance",plate:t.plate,source:"vehicles"}})}goToCalculator(t){this.router.navigate(["/tabs/home"],{queryParams:{action:"calculator",plate:t.plate,source:"vehicles"}})}abrirHistoricoAbastecimentos(t){this.router.navigate(["/supply-history"],{queryParams:{plate:t.plate}})}abrirHistoricoManutencoes(t){this.router.navigate(["/maintenance-history"],{queryParams:{plate:t.plate}})}abrirPaginaAcoesVeiculo(t){this.router.navigate(["/tabs/vehicles/acoes",t.plate])}saveVehicle(){if(this.vehicleType&&this.vehicleModel&&this.vehiclePlate){var t;const i=this.vehiclePlate.toUpperCase();this.vehiclePlate=i;const u={type:this.vehicleType,model:this.vehicleModel,consumption:this.vehicleConsumption||void 0,odometer:null!==(t=this.vehicleOdometer)&&void 0!==t?t:void 0,plate:i,observations:this.vehicleObservations||void 0};if(this.editingPlate)this.vehicleService.updateVehicle(this.editingPlate,u),alert("Ve\xedculo atualizado com sucesso!"),this.editingPlate=null,this.isFormVisible=!1;else{if(this.vehicles.some(d=>d.plate===i))return void alert("J\xe1 existe um ve\xedculo com esta placa!");this.vehicleService.addVehicle(u),alert("Ve\xedculo salvo com sucesso!"),this.isFormVisible=!1}this.clearForm()}else alert("Por favor, preencha todos os campos obrigat\xf3rios.")}editVehicle(t){this.router.navigate(["/tabs/vehicles/form",t.plate])}setDefault(t){var i=this;return(0,g.A)(function*(){i.vehicleService.setDefaultVehicle(t.plate),(yield i.toastCtrl.create({message:"Ve\xedculo ".concat(t.model," definido como padr\xe3o."),duration:2e3,position:"bottom"})).present()})()}deleteVehicle(t){var i=this;return(0,g.A)(function*(){yield(yield i.alertCtrl.create({header:"Confirmar Exclus\xe3o",message:"Deseja realmente excluir o ve\xedculo ".concat(t.model,"?"),buttons:[{text:"Cancelar",role:"cancel"},{text:"Excluir",handler:()=>{i.vehicleService.deleteVehicle(t.plate),i.editingPlate===t.plate&&i.cancelEdit()}}]})).present()})()}cancelEdit(){this.editingPlate=null,this.isFormVisible=!1,this.clearForm()}toggleForm(){this.router.navigate(["/tabs/vehicles/form"])}clearForm(){this.vehicleType="",this.vehicleModel="",this.vehicleConsumption=null,this.vehicleOdometer=null,this.vehiclePlate="",this.vehicleObservations=""}}return(l=p).\u0275fac=function(t){return new(t||l)(e.rXU(o.K),e.rXU(c.Ix),e.rXU(r.GD),e.rXU(r.hG),e.rXU(r.K_),e.rXU(m.k))},l.\u0275cmp=e.VBU({type:l,selectors:[["app-vehicles"]],standalone:!1,decls:25,vars:5,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"ion-padding"],[1,"ion-margin-bottom"],[2,"font-size","3rem","margin","10px 0"],["class","ion-margin-top",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed",1,"ion-margin-bottom","ion-margin-end"],["color","light",3,"click"],[3,"name"],[1,"ion-margin-top"],["class","ion-margin-bottom vehicle-card",3,"click",4,"ngFor","ngForOf"],[1,"ion-margin-bottom","vehicle-card",3,"click"],["role","toolbar","aria-label","A\xe7\xf5es do ve\xedculo","aria-orientation","vertical",1,"vehicle-actions",3,"click"],["fill","clear",3,"click"],["aria-hidden","true",3,"name","color"],[1,"sr-only"],["name","create-outline","aria-hidden","true"],["fill","clear","color","danger",3,"click"],["name","trash-outline","aria-hidden","true"],[1,"vehicle-card-layout"],[1,"icon-cell"],["color","primary","size","large",3,"name"],[1,"title-cell"],[1,"details-cell"],[1,"vehicle-details"],["class","icone-ajuda-odometro","tabindex","0",3,"click",4,"ngIf"],[4,"ngIf"],["tabindex","0",1,"icone-ajuda-odometro",3,"click"]],template:function(t,i){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Ve\xedculos"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e.EFF(8,"Ve\xedculos"),e.k0s()()(),e.j41(9,"div",4)(10,"ion-card",5)(11,"ion-card-header")(12,"ion-card-subtitle"),e.EFF(13,"Resumo Geral"),e.k0s(),e.j41(14,"ion-card-title"),e.EFF(15,"Minha Frota"),e.k0s()(),e.j41(16,"ion-card-content")(17,"h1",6),e.EFF(18),e.k0s(),e.j41(19,"p"),e.EFF(20,"Ve\xedculos cadastrados"),e.k0s()()(),e.DNE(21,I,4,1,"div",7),e.k0s(),e.j41(22,"ion-fab",8)(23,"ion-fab-button",9),e.bIt("click",function(){return i.toggleForm()}),e.nrm(24,"ion-icon",10),e.k0s()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(14),e.JRh(i.vehicles.length),e.R7$(3),e.Y8G("ngIf",i.vehicles.length>0&&!i.isFormVisible),e.R7$(3),e.Y8G("name",i.isFormVisible?"remove":"add"))},dependencies:[v.Sq,v.bT,r.Jm,r.b_,r.I9,r.ME,r.HW,r.tN,r.W9,r.Q8,r.YW,r.eU,r.iq,r.BC,r.ai,v.Pc,v.QX],styles:["ion-item.vehicle-item[_ngcontent-%COMP%]{align-items:flex-start}.ion-padding[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%], ion-card[_ngcontent-%COMP%]{border-radius:18px;overflow:hidden}.vehicle-card[_ngcontent-%COMP%]{position:relative}.vehicle-card-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:48px 1fr;grid-template-rows:auto auto;column-gap:12px;align-items:center}.icon-cell[_ngcontent-%COMP%]{grid-column:1;grid-row:1;display:flex;align-items:center;justify-content:flex-start}.title-cell[_ngcontent-%COMP%]{grid-column:2;grid-row:1}.details-cell[_ngcontent-%COMP%]{grid-column:1/-1;grid-row:2;margin-top:6px}.vehicle-actions[_ngcontent-%COMP%]{position:absolute;top:6px;right:6px;display:flex;flex-direction:column;align-items:flex-end;gap:4px;z-index:2}.vehicle-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 6px;--padding-end: 6px;min-width:44px;min-height:44px}.vehicle-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--ion-color-primary);outline-offset:2px}.sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.plate-label[_ngcontent-%COMP%]{font-size:.85em;text-transform:uppercase;letter-spacing:.04em;color:var(--ion-color-medium);margin-right:4px}.vehicle-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0;font-size:.9em;color:var(--ion-color-medium)}"]}),p})();function T(l,p){if(1&l&&e.nrm(0,"ion-icon",21),2&l){const a=e.XpG();e.Y8G("name","car"===a.tipo?"car-sport-outline":"motorcycle"===a.tipo?"moto-custom":"truck"===a.tipo?"truck-heavy":"bus"===a.tipo?"bus-outline":"car-outline")}}function D(l,p){1&l&&e.nrm(0,"ion-icon",22)}function O(l,p){if(1&l&&(e.j41(0,"ion-text"),e.EFF(1),e.k0s()),2&l){const a=e.XpG();e.R7$(),e.JRh(a.obter_nome_tipo(a.tipo))}}function R(l,p){1&l&&(e.j41(0,"ion-text",23),e.EFF(1,"Selecione o tipo"),e.k0s())}let k=(()=>{var l;class p{constructor(t,i,u,d,_,b){this.rota=t,this.roteador=i,this.servico_veiculo=u,this.acoes=d,this.toast=_,this.ajuda_odometro=b,this.tipo="",this.modelo="",this.consumo=null,this.odometro=null,this.placa="",this.observacoes="",this.placa_original=null}ngOnInit(){const t=this.rota.snapshot.paramMap.get("plate");t&&this.servico_veiculo.getVehicles().subscribe(i=>{const u=i.find(b=>b.plate.toUpperCase()===t.toUpperCase());var d,_;u&&(this.tipo=u.type,this.modelo=u.model,this.consumo=null!==(d=u.consumption)&&void 0!==d?d:null,this.odometro=null!==(_=u.odometer)&&void 0!==_?_:null,this.placa=u.plate,this.observacoes=u.observations||"",this.placa_original=u.plate)})}get titulo_pagina(){return this.placa_original?"Editar Ve\xedculo":"Adicionar Ve\xedculo"}abrirSeletorTipoVeiculo(){var t=this;return(0,g.A)(function*(){yield(yield t.acoes.create({header:"Selecione o Tipo de Ve\xedculo",buttons:[{text:"Carro",icon:"car-sport-outline",handler:()=>{t.tipo="car"}},{text:"Moto",icon:"moto-custom",handler:()=>{t.tipo="motorcycle"}},{text:"Caminh\xe3o",icon:"truck-heavy",handler:()=>{t.tipo="truck"}},{text:"\xd4nibus",icon:"bus-outline",handler:()=>{t.tipo="bus"}},{text:"Van",icon:"car-outline",handler:()=>{t.tipo="van"}},{text:"Cancelar",icon:"close",role:"cancel"}]})).present()})()}salvar(){var t=this;return(0,g.A)(function*(){var i,u;if(!(t.tipo&&t.modelo&&t.placa))return void(yield t.toast.create({message:"Preencha tipo, modelo e placa.",duration:2e3,position:"bottom"})).present();const d=t.placa.toUpperCase(),_={type:t.tipo,model:t.modelo,plate:d,consumption:null!==(i=t.consumo)&&void 0!==i?i:void 0,odometer:null!==(u=t.odometro)&&void 0!==u?u:void 0,observations:t.observacoes||void 0};if(t.placa_original)t.servico_veiculo.updateVehicle(t.placa_original,_),(yield t.toast.create({message:"Ve\xedculo atualizado com sucesso!",duration:2e3,position:"bottom"})).present();else{let b=!1;if(t.servico_veiculo.getVehicles().subscribe(x=>{b=x.some($=>$.plate.toUpperCase()===d)}).unsubscribe(),b)return void(yield t.toast.create({message:"J\xe1 existe um ve\xedculo com esta placa!",duration:2e3,position:"bottom",color:"warning"})).present();t.servico_veiculo.addVehicle(_),(yield t.toast.create({message:"Ve\xedculo salvo com sucesso!",duration:2e3,position:"bottom"})).present()}t.roteador.navigate(["/tabs/vehicles"])})()}cancelar(){this.roteador.navigate(["/tabs/vehicles"])}obter_nome_tipo(t){return this.servico_veiculo.getVehicleTypeName(t)}}return(l=p).\u0275fac=function(t){return new(t||l)(e.rXU(c.nX),e.rXU(c.Ix),e.rXU(o.K),e.rXU(r.GD),e.rXU(r.K_),e.rXU(m.k))},l.\u0275cmp=e.VBU({type:l,selectors:[["app-formulario-veiculo"]],standalone:!1,decls:36,vars:14,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/vehicles","text","Voltar"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"ion-padding"],["button","","detail","true",3,"click"],["slot","start","color","primary",3,"name",4,"ngIf"],["name","car-sport-outline","slot","start","color","medium",4,"ngIf"],["position","stacked"],[4,"ngIf"],["color","medium",4,"ngIf"],["label","Modelo","label-placement","floating","placeholder","Ex: Fiat Uno",3,"ngModelChange","ngModel"],["label","Od\xf4metro (Inicial)","label-placement","floating","type","number","inputmode","numeric","placeholder","Opcional",3,"ngModelChange","ngModel"],["slot","end","tabindex","0",1,"icone-ajuda-odometro",3,"click"],["label","Consumo (Inicial)","type","number","inputmode","decimal","label-placement","floating","placeholder","Opcional",3,"ngModelChange","ngModel"],["label","Placa","label-placement","floating","placeholder","Ex: ABC-1234",2,"text-transform","uppercase",3,"ngModelChange","ngModel"],["label","Observa\xe7\xf5es","label-placement","floating","placeholder","Opcional","rows","3",3,"ngModelChange","ngModel"],["expand","block",1,"ion-margin-top",3,"click"],["expand","block","color","medium",1,"ion-margin-top",3,"click"],["slot","start","color","primary",3,"name"],["name","car-sport-outline","slot","start","color","medium"],["color","medium"]],template:function(t,i){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e.EFF(10),e.k0s()()(),e.j41(11,"div",6)(12,"ion-list")(13,"ion-item",7),e.bIt("click",function(){return i.abrirSeletorTipoVeiculo()}),e.DNE(14,T,1,1,"ion-icon",8)(15,D,1,0,"ion-icon",9),e.j41(16,"ion-label",10),e.EFF(17,"Tipo de Ve\xedculo"),e.k0s(),e.DNE(18,O,2,1,"ion-text",11)(19,R,2,0,"ion-text",12),e.k0s(),e.j41(20,"ion-item")(21,"ion-input",13),e.mxI("ngModelChange",function(d){return e.DH7(i.modelo,d)||(i.modelo=d),d}),e.k0s()(),e.j41(22,"ion-item")(23,"ion-input",14),e.mxI("ngModelChange",function(d){return e.DH7(i.odometro,d)||(i.odometro=d),d}),e.k0s(),e.j41(24,"span",15),e.bIt("click",function(d){return i.ajuda_odometro.mostrarAjudaOdometro(d)}),e.EFF(25,"?"),e.k0s()(),e.j41(26,"ion-item")(27,"ion-input",16),e.mxI("ngModelChange",function(d){return e.DH7(i.consumo,d)||(i.consumo=d),d}),e.k0s()(),e.j41(28,"ion-item")(29,"ion-input",17),e.mxI("ngModelChange",function(d){return e.DH7(i.placa,d)||(i.placa=d),d}),e.k0s()(),e.j41(30,"ion-item")(31,"ion-textarea",18),e.mxI("ngModelChange",function(d){return e.DH7(i.observacoes,d)||(i.observacoes=d),d}),e.k0s()()(),e.j41(32,"ion-button",19),e.bIt("click",function(){return i.salvar()}),e.EFF(33),e.k0s(),e.j41(34,"ion-button",20),e.bIt("click",function(){return i.cancelar()}),e.EFF(35," Cancelar "),e.k0s()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(5),e.JRh(i.titulo_pagina),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(4),e.JRh(i.titulo_pagina),e.R7$(4),e.Y8G("ngIf",i.tipo),e.R7$(),e.Y8G("ngIf",!i.tipo),e.R7$(3),e.Y8G("ngIf",i.tipo),e.R7$(),e.Y8G("ngIf",!i.tipo),e.R7$(2),e.R50("ngModel",i.modelo),e.R7$(2),e.R50("ngModel",i.odometro),e.R7$(4),e.R50("ngModel",i.consumo),e.R7$(2),e.R50("ngModel",i.placa),e.R7$(2),e.R50("ngModel",i.observacoes),e.R7$(2),e.SpI(" ",i.placa_original?"Atualizar Ve\xedculo":"Salvar Ve\xedculo"," "))},dependencies:[v.bT,V.BC,V.vS,r.Jm,r.QW,r.W9,r.eU,r.iq,r.$w,r.uz,r.he,r.nf,r.IO,r.nc,r.BC,r.ai,r.su,r.Gw,r.el],styles:["ion-card[_ngcontent-%COMP%]{border-radius:18px}ion-item[_ngcontent-%COMP%]{--inner-padding-end: 8px}"]}),p})();function S(l,p){if(1&l&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"Od\xf4metro:"),e.k0s(),e.EFF(3),e.nI1(4,"number"),e.k0s()),2&l){const a=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,1,a.veiculo.odometer)," km ")}}function A(l,p){if(1&l&&(e.j41(0,"div")(1,"h2"),e.EFF(2),e.j41(3,"small"),e.EFF(4),e.nI1(5,"uppercase"),e.k0s()(),e.j41(6,"p")(7,"strong"),e.EFF(8,"Tipo:"),e.k0s(),e.EFF(9),e.k0s(),e.DNE(10,S,5,3,"p",3),e.k0s()),2&l){const a=e.XpG();e.R7$(2),e.SpI("",a.veiculo.model," "),e.R7$(2),e.SpI("(",e.bMT(5,4,a.veiculo.plate),")"),e.R7$(5),e.SpI(" ",a.servicoVeiculo.getVehicleTypeName(a.veiculo.type)),e.R7$(),e.Y8G("ngIf",null!=a.veiculo.odometer)}}const U=[{path:"",component:M},{path:"form",component:k},{path:"form/:plate",component:k},{path:"acoes/:plate",component:(()=>{var l;class p{constructor(t,i,u){this.rota=t,this.roteador=i,this.servicoVeiculo=u,this.placaVeiculo="",this.veiculo=null}ngOnInit(){this.placaVeiculo=this.rota.snapshot.paramMap.get("plate")||"",this.servicoVeiculo.getVehicles().subscribe(t=>{this.veiculo=t.find(i=>i.plate===this.placaVeiculo)||null})}abastecer(){this.veiculo&&this.roteador.navigate(["/tabs/home"],{queryParams:{action:"supply",plate:this.veiculo.plate,source:"vehicles"}})}manutencao(){this.veiculo&&this.roteador.navigate(["/tabs/home"],{queryParams:{action:"maintenance",plate:this.veiculo.plate,source:"vehicles"}})}historicoAbastecimentos(){this.veiculo&&this.roteador.navigate(["/supply-history"],{queryParams:{plate:this.veiculo.plate}})}historicoManutencoes(){this.veiculo&&this.roteador.navigate(["/maintenance-history"],{queryParams:{plate:this.veiculo.plate}})}}return(l=p).\u0275fac=function(t){return new(t||l)(e.rXU(c.nX),e.rXU(c.Ix),e.rXU(o.K))},l.\u0275cmp=e.VBU({type:l,selectors:[["app-veiculo-acoes"]],standalone:!1,decls:35,vars:1,consts:[["slot","start"],["defaultHref","/tabs/vehicles","text","Voltar"],[1,"ion-padding"],[4,"ngIf"],[1,"ion-margin-top"],["size","6"],["expand","block","color","success","fill","solid","size","default",3,"click"],[1,"ion-text-center"],["name","gas-station",2,"font-size","24px","display","block","margin","0 auto","color","white"],[2,"font-size","12px","color","white"],["expand","block","color","danger","fill","solid","size","default",3,"click"],["name","construct-outline",2,"font-size","24px","display","block","margin","0 auto","color","white"],[2,"font-size","12px"],["expand","block","fill","outline","size","default",3,"click"],["name","reader-outline",2,"font-size","24px","display","block","margin","0 auto"],["name","albums-outline",2,"font-size","24px","display","block","margin","0 auto"]],template:function(t,i){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button",1),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"A\xe7\xf5es do Ve\xedculo"),e.k0s()()(),e.j41(6,"ion-content",2),e.DNE(7,A,11,6,"div",3),e.j41(8,"ion-grid",4)(9,"ion-row")(10,"ion-col",5)(11,"ion-button",6),e.bIt("click",function(){return i.abastecer()}),e.j41(12,"div",7),e.nrm(13,"ion-icon",8),e.j41(14,"span",9),e.EFF(15,"Abastecer"),e.k0s()()()(),e.j41(16,"ion-col",5)(17,"ion-button",10),e.bIt("click",function(){return i.manutencao()}),e.j41(18,"div",7),e.nrm(19,"ion-icon",11),e.j41(20,"span",12),e.EFF(21,"Manuten\xe7\xe3o"),e.k0s()()()()(),e.j41(22,"ion-row",4)(23,"ion-col",5)(24,"ion-button",13),e.bIt("click",function(){return i.historicoAbastecimentos()}),e.j41(25,"div",7),e.nrm(26,"ion-icon",14),e.j41(27,"span",12),e.EFF(28,"Hist\xf3rico de Abastecimentos"),e.k0s()()()(),e.j41(29,"ion-col",5)(30,"ion-button",13),e.bIt("click",function(){return i.historicoManutencoes()}),e.j41(31,"div",7),e.nrm(32,"ion-icon",15),e.j41(33,"span",12),e.EFF(34,"Hist\xf3rico de Manuten\xe7\xf5es"),e.k0s()()()()()()()),2&t&&(e.R7$(7),e.Y8G("ngIf",i.veiculo))},dependencies:[v.bT,r.Jm,r.QW,r.hU,r.W9,r.lO,r.eU,r.iq,r.ln,r.BC,r.ai,r.el,v.Pc,v.QX],encapsulation:2}),p})()}];let G=(()=>{var l;class p{}return(l=p).\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.$C({type:l}),l.\u0275inj=n.G2t({imports:[f.iI.forChild(U),f.iI]}),p})(),z=(()=>{var l;class p{}return(l=p).\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.$C({type:l}),l.\u0275inj=n.G2t({imports:[v.MD,V.YN,r.bv,G]}),p})()},9198(E,F,h){h.d(F,{K:()=>r});var v=h(4412),V=h(2615);let r=(()=>{var f;class g{constructor(){this.vehicles=[],this.vehiclesSubject=new v.t([]),this.STORAGE_KEY="kmrodados_vehicles",this.loadVehicles()}loadVehicles(){const s=localStorage.getItem(this.STORAGE_KEY);s&&this.processLoadedVehicles(JSON.parse(s))}processLoadedVehicles(s){this.vehicles=s.map(e=>({...e,plate:e.plate?e.plate.toUpperCase():e.plate})),this.vehicles.forEach(e=>{e.supplies&&e.supplies.forEach(n=>{n.date=new Date(n.date),n.id||(n.id=this.generateId())}),e.consumptionHistory&&e.consumptionHistory.forEach(n=>{n.date=new Date(n.date),n.id||(n.id=this.generateId())}),e.maintenance&&e.maintenance.forEach(n=>{n.date=new Date(n.date),n.id||(n.id=this.generateId())})}),this.vehiclesSubject.next(this.vehicles)}importBackup(s){try{const e=JSON.parse(s);return!(!Array.isArray(e)||!e.every(o=>o.hasOwnProperty("plate")&&o.hasOwnProperty("model"))||(this.processLoadedVehicles(e),this.saveVehicles(),0))}catch(e){return console.error("Error importing backup:",e),!1}}clearAllData(){this.vehicles=[],this.vehiclesSubject.next(this.vehicles),localStorage.removeItem(this.STORAGE_KEY)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}saveVehicles(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.vehicles))}getVehicles(){return this.vehiclesSubject.asObservable()}addVehicle(s){const e=s.plate.toUpperCase();s.plate=e,0===this.vehicles.length&&(s.isDefault=!0),s.createdAt||(s.createdAt=Date.now()),this.vehicles.push({...s,supplies:[]}),this.vehiclesSubject.next(this.vehicles),this.saveVehicles()}setDefaultVehicle(s){const e=s.toUpperCase();let n=!1;this.vehicles.forEach(o=>{o.plate===e?o.isDefault||(o.isDefault=!0,n=!0):o.isDefault&&(o.isDefault=!1,n=!0)}),n&&(this.vehiclesSubject.next(this.vehicles),this.saveVehicles())}addConsumptionRecord(s,e){const n=s.toUpperCase(),o=this.vehicles.find(c=>c.plate===n);return!!o&&(o.consumptionHistory||(o.consumptionHistory=[]),e.id||(e.id=this.generateId()),e.createdAt||(e.createdAt=Date.now()),o.consumptionHistory.push(e),this.vehiclesSubject.next([...this.vehicles]),this.saveVehicles(),!0)}updateVehicle(s,e){const n=s.toUpperCase(),o=e.plate.toUpperCase();e.plate=o;const c=this.vehicles.findIndex(m=>m.plate===n);if(-1!==c){const m=this.vehicles[c].supplies||[];this.vehicles[c]={...e,supplies:m},this.vehiclesSubject.next(this.vehicles),this.saveVehicles()}}deleteVehicle(s){const e=s.toUpperCase(),n=this.vehicles.findIndex(o=>o.plate===e);-1!==n&&(this.vehicles.splice(n,1),this.vehiclesSubject.next(this.vehicles),this.saveVehicles())}addSupply(s,e){const n=s.toUpperCase(),o=this.vehicles.find(c=>c.plate===n);return o?(o.supplies||(o.supplies=[]),e.id||(e.id=this.generateId()),e.createdAt||(e.createdAt=Date.now()),o.supplies.push(e),this.vehiclesSubject.next([...this.vehicles]),this.saveVehicles(),!0):(console.error("Vehicle not found for plate:",n),!1)}addTrip(s,e){const n=s.toUpperCase(),o=this.vehicles.find(c=>c.plate===n);return o?(o.trips||(o.trips=[]),e.id||(e.id=this.generateId()),e.createdAt||(e.createdAt=Date.now()),o.trips.push(e),this.vehiclesSubject.next([...this.vehicles]),this.saveVehicles(),!0):(console.error("Vehicle not found for plate:",s),!1)}addMaintenance(s,e){const n=s.toUpperCase(),o=this.vehicles.find(c=>c.plate===n);return!!o&&(o.maintenance||(o.maintenance=[]),e.id||(e.id=this.generateId()),e.createdAt||(e.createdAt=Date.now()),o.maintenance.push(e),this.vehiclesSubject.next([...this.vehicles]),this.saveVehicles(),!0)}removerAbastecimento(s,e){const n=s.toUpperCase(),o=this.vehicles.find(c=>c.plate===n);if(o&&o.supplies){const c=o.supplies.findIndex(m=>m.id===e);if(-1!==c)return o.supplies.splice(c,1),this.vehiclesSubject.next([...this.vehicles]),this.saveVehicles(),!0}return!1}removerManutencao(s,e){const n=s.toUpperCase(),o=this.vehicles.find(c=>c.plate===n);if(o&&o.maintenance){const c=o.maintenance.findIndex(m=>m.id===e);if(-1!==c)return o.maintenance.splice(c,1),this.vehiclesSubject.next([...this.vehicles]),this.saveVehicles(),!0}return!1}updateSupply(s,e){const n=s.toUpperCase(),o=this.vehicles.find(c=>c.plate===n);if(o&&o.supplies){const c=o.supplies.findIndex(m=>m.id===e.id);if(-1!==c)return o.supplies[c]=e,this.vehiclesSubject.next(this.vehicles),this.saveVehicles(),!0}return!1}updateMaintenance(s,e){const n=s.toUpperCase(),o=this.vehicles.find(c=>c.plate===n);if(o&&o.maintenance){const c=o.maintenance.findIndex(m=>m.id===e.id);if(-1!==c)return o.maintenance[c]=e,this.vehiclesSubject.next(this.vehicles),this.saveVehicles(),!0}return!1}updateConsumptionRecord(s,e){const n=s.toUpperCase(),o=this.vehicles.find(c=>c.plate===n);if(o&&o.consumptionHistory){const c=o.consumptionHistory.findIndex(m=>m.id===e.id);if(-1!==c)return o.consumptionHistory[c]=e,this.vehiclesSubject.next(this.vehicles),this.saveVehicles(),!0}return!1}updateTrip(s,e){const n=s.toUpperCase(),o=this.vehicles.find(c=>c.plate===n);if(o&&o.trips){const c=o.trips.findIndex(m=>m.id===e.id);if(-1!==c)return o.trips[c]=e,this.vehiclesSubject.next(this.vehicles),this.saveVehicles(),!0}return!1}getVehicleTypeName(s){return{car:"Carro",motorcycle:"Moto",truck:"Caminh\xe3o",bus:"\xd4nibus",van:"Van"}[s]||s}getVehicleIcon(s){switch(s){case"car":default:return"car-sport-outline";case"motorcycle":return"moto-custom";case"truck":return"truck-heavy";case"bus":return"bus-outline";case"van":return"car-outline"}}}return(f=g).\u0275fac=function(s){return new(s||f)},f.\u0275prov=V.jDH({token:f,factory:f.\u0275fac,providedIn:"root"}),g})()}}]);