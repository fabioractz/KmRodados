"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1839],{1839(V,A,f){f.d(A,{SettingsPageModule:()=>z});var E=f(2200),x=f(4341),g=f(7343),P=f(8132),u=f(467),I=f(5083),a=f(8941),t=f(4697),s=f(8254),o=f(1889);const c=(0,I.F3)("Filesystem",{web:()=>f.e(2937).then(f.bind(f,2937)).then(m=>new m.FilesystemWeb)});(0,s.Y)();const y=(0,I.F3)("Share",{web:()=>f.e(1227).then(f.bind(f,1227)).then(m=>new m.ShareWeb)});var e=f(3664),p=f(2615),R=f(9198),w=f(4007);const U=["fileInput"];function D(m,S){if(1&m&&e.nrm(0,"ion-icon",38),2&m){const v=e.XpG().$implicit;e.xc7("color",v.contrast)}}function N(m,S){if(1&m){const v=e.RV6();e.j41(0,"div",35),e.bIt("click",function(){const n=p.eBV(v).$implicit,r=e.XpG(2);return p.Njj(r.changeColor(n.value))}),e.j41(1,"div",36),e.DNE(2,D,1,2,"ion-icon",37),e.k0s()()}if(2&m){const v=S.$implicit,i=e.XpG(2);e.AVh("selected",i.selectedColor===v.value),e.R7$(),e.xc7("background",v.value),e.R7$(),e.Y8G("ngIf",i.selectedColor===v.value)}}function B(m,S){if(1&m&&(e.j41(0,"div",33),e.DNE(1,N,3,5,"div",34),e.k0s()),2&m){const v=e.XpG();e.R7$(),e.Y8G("ngForOf",v.colors)}}function L(m,S){if(1&m){const v=e.RV6();e.j41(0,"ion-item",39)(1,"ion-toggle",40),e.bIt("ionChange",function(n){const r=p.eBV(v).$implicit,h=e.XpG();return p.Njj(h.toggleCardEnabled(r,n))}),e.k0s(),e.j41(2,"ion-label"),e.EFF(3),e.k0s(),e.nrm(4,"ion-reorder",23),e.k0s()}if(2&m){const v=S.$implicit,i=e.XpG();e.R7$(),e.Y8G("checked",i.homeCardsEnabled[v]),e.R7$(2),e.JRh(i.homeCardsLabels[v])}}const $=[{path:"",component:(()=>{var m;class S{constructor(i,n,r,h){this.vehicleService=i,this.alertCtrl=n,this.toastCtrl=r,this.ads=h,this.vehicles=[],this.themeMode="system",this.colors=[{name:"Azul",value:"#3880ff",contrast:"#ffffff",shade:"#3171e0",tint:"#4c8dff"},{name:"Indigo",value:"#5260ff",contrast:"#ffffff",shade:"#4854e0",tint:"#6370ff"},{name:"Roxo",value:"#7a49a5",contrast:"#ffffff",shade:"#6b4091",tint:"#875bae"},{name:"Rosa",value:"#ff2d55",contrast:"#ffffff",shade:"#e0284b",tint:"#ff4266"},{name:"Vermelho",value:"#eb445a",contrast:"#ffffff",shade:"#cf3c4f",tint:"#ed576b"},{name:"Laranja",value:"#fd7e14",contrast:"#ffffff",shade:"#df6f12",tint:"#fd8b2c"},{name:"Amarelo",value:"#ffc409",contrast:"#000000",shade:"#e0ac08",tint:"#ffca22"},{name:"Verde",value:"#2dd36f",contrast:"#000000",shade:"#28ba62",tint:"#42d77d"},{name:"Esmeralda",value:"#20c997",contrast:"#ffffff",shade:"#1cb185",tint:"#36cea2"},{name:"Ciano",value:"#3dc2ff",contrast:"#ffffff",shade:"#36abe0",tint:"#50c8ff"},{name:"Cinza",value:"#607d8b",contrast:"#ffffff",shade:"#546e7a",tint:"#708c99"},{name:"Grafite",value:"#a6a6a6",contrast:"#000000",shade:"#929292",tint:"#afafaf"}],this.selectedColor="#3880ff",this.showColorPicker=!1,this.homeCardsOrder=["summary","quickActions","consumption","maintenance","history"],this.homeCardsLabels={summary:"Resumo do Ve\xedculo",quickActions:"A\xe7\xf5es R\xe1pidas",consumption:"Hist\xf3rico de Consumo",maintenance:"Hist\xf3rico de Manuten\xe7\xf5es",history:"Hist\xf3rico"},this.homeCardsEnabled={summary:!0,quickActions:!0,consumption:!0,maintenance:!0,history:!0},this.versao_app=""}ngOnInit(){this.vehicleService.getVehicles().subscribe(l=>{this.vehicles=l});const i=localStorage.getItem("themeMode"),n=localStorage.getItem("darkMode");this.themeMode=i||("true"===n?"dark":"false"===n?"light":"system");const r=localStorage.getItem("primaryColor");r&&(this.selectedColor=r);const h=localStorage.getItem("home_card_order");if(h)try{const l=JSON.parse(h);if(Array.isArray(l)&&l.length){const _=["summary","quickActions","consumption","maintenance","history"],k=l.filter(C=>_.includes(C)),b=_.filter(C=>!k.includes(C));this.homeCardsOrder=[...k,...b]}}catch{}const d=localStorage.getItem("home_card_enabled");if(d)try{const l=JSON.parse(d);this.homeCardsEnabled={...this.homeCardsEnabled,...l}}catch{}this.ads.preloadInterstitial(),this.carregarVersaoApp()}getSelectedColorName(){const i=this.colors.find(n=>n.value===this.selectedColor);return i?i.name:""}onReorder(i){const n=i.detail.from,r=i.detail.to;if(n!==r){const h=this.homeCardsOrder.splice(n,1)[0];this.homeCardsOrder.splice(r,0,h),localStorage.setItem("home_card_order",JSON.stringify(this.homeCardsOrder))}i.detail.complete()}toggleCardEnabled(i,n){this.homeCardsEnabled[i]=n.detail.checked,localStorage.setItem("home_card_enabled",JSON.stringify(this.homeCardsEnabled))}toggleColorPicker(){this.showColorPicker=!this.showColorPicker}changeColor(i){var n=this;return(0,u.A)(function*(){const r=n.colors.find(h=>h.value===i);if(r){n.selectedColor=i;const h=(l,_)=>{document.documentElement.style.setProperty(l,_),document.body.style.setProperty(l,_)};h("--ion-color-primary",r.value),h("--ion-color-primary-contrast",r.contrast),h("--ion-color-primary-shade",r.shade),h("--ion-color-primary-tint",r.tint),localStorage.setItem("primaryColor",r.value),localStorage.setItem("primaryColorContrast",r.contrast),localStorage.setItem("primaryColorShade",r.shade),localStorage.setItem("primaryColorTint",r.tint);const d=yield n.ads.showInterstitialWithResult();if(!d.ok||!d.shown){if("throttled"===d.reason)return;const l=n.ads.obterDiagnostico(),_="reason=".concat(d.reason||"unknown","; error=").concat(d.error||"","; adId=").concat(l.adId,"; testMode=").concat(l.testMode,"; plataforma=").concat(l.plataforma).concat(l.ultimoErro?"; ultimoErro="+l.ultimoErro:"").concat(l.diagnosticoAtivo?"; diagnosticoAtivo=true":"");yield(yield n.alertCtrl.create({header:"Falha ao exibir an\xfancio",message:"N\xe3o foi poss\xedvel exibir o an\xfancio agora.",buttons:[{text:"Copiar",handler:(b=(0,u.A)(function*(){try{var C;yield null===(C=navigator.clipboard)||void 0===C?void 0:C.writeText(_)}catch{try{var O,T;null===(O=(T=window).prompt)||void 0===O||O.call(T,"Copiar detalhes do erro:",_)}catch{}}}),function(){return b.apply(this,arguments)})},{text:"OK",role:"cancel"}]})).present()}}var b})()}changeTheme(i){var n=this;return(0,u.A)(function*(){const r=i.detail.value;if(n.themeMode=r,localStorage.setItem("themeMode",r),localStorage.removeItem("darkMode"),"dark"===r)document.body.classList.add("dark"),document.body.classList.remove("light");else if("light"===r)document.body.classList.remove("dark"),document.body.classList.add("light");else if("system"===r){const d=window.matchMedia("(prefers-color-scheme: dark)");document.body.classList.remove("light"),d.matches?document.body.classList.add("dark"):document.body.classList.remove("dark")}try{const d=I.Ii.getPlatform(),l=document.body.classList.contains("dark");"android"===d?(yield t.eA.setOverlaysWebView({overlay:!1}),yield t.eA.setStyle({style:l?t.OF.Dark:t.OF.Light})):"ios"===d&&(yield t.eA.setOverlaysWebView({overlay:!0}),yield t.eA.setStyle({style:l?t.OF.Dark:t.OF.Light}))}catch{}const h=yield n.ads.showInterstitialWithResult();if(!h.ok||!h.shown){if("throttled"===h.reason)return;const d=n.ads.obterDiagnostico(),l="reason=".concat(h.reason||"unknown","; error=").concat(h.error||"","; adId=").concat(d.adId,"; testMode=").concat(d.testMode,"; plataforma=").concat(d.plataforma).concat(d.ultimoErro?"; ultimoErro="+d.ultimoErro:"").concat(d.diagnosticoAtivo?"; diagnosticoAtivo=true":"");yield(yield n.alertCtrl.create({header:"Falha ao exibir an\xfancio",message:"N\xe3o foi poss\xedvel exibir o an\xfancio agora.",buttons:[{text:"Copiar",handler:(k=(0,u.A)(function*(){try{var b;yield null===(b=navigator.clipboard)||void 0===b?void 0:b.writeText(l)}catch{try{var C,O;null===(C=(O=window).prompt)||void 0===C||C.call(O,"Copiar detalhes do erro:",l)}catch{}}}),function(){return k.apply(this,arguments)})},{text:"OK",role:"cancel"}]})).present()}var k})()}selecionarTema(i,n){n&&n.stopPropagation(),this.changeTheme({detail:{value:i}})}carregarVersaoApp(){a.q.getInfo().then(i=>{this.versao_app=i.version||""}).catch(()=>{this.versao_app=""})}downloadBackup(){var i=this;return(0,u.A)(function*(){const n=JSON.stringify(i.vehicles,null,2),r=(new Date).toISOString().split("T")[0],h="kmrodados_backup_".concat(r,".json"),d=I.Ii.getPlatform();var T;if("ios"!==d&&"android"!==d)try{const l=new Blob([n],{type:"application/json"}),_=window.URL.createObjectURL(l),k=document.createElement("a");k.href=_,k.download=h,document.body.appendChild(k),k.click(),document.body.removeChild(k),window.URL.revokeObjectURL(_),(yield i.toastCtrl.create({message:"Backup realizado com sucesso!",duration:2e3,color:"success",position:"bottom"})).present()}catch(l){const k=navigator.userAgent||"";let b="";if(l&&"object"==typeof l)if(l.message)b=l.message;else try{b=JSON.stringify(l)}catch{b=String(l)}else b=String(l);const C="mensagem=".concat(b,"; plataforma=web; userAgent=").concat(k);yield(yield i.alertCtrl.create({header:"Erro ao exportar backup",message:"N\xe3o foi poss\xedvel exportar o backup.\n\n"+C,buttons:[{text:"Copiar erro",handler:function(){var T=(0,u.A)(function*(){try{var j;yield null===(j=navigator.clipboard)||void 0===j?void 0:j.writeText(C)}catch{try{var F,M;null===(F=(M=window).prompt)||void 0===F||F.call(M,"Copiar detalhes do erro:",C)}catch{}}});return function(){return T.apply(this,arguments)}}()},{text:"OK",role:"cancel"}]})).present()}else try{yield c.writeFile({path:h,data:n,directory:o.__.Documents,encoding:o.Wi.UTF8});let l="";try{l=(yield c.getUri({path:h,directory:o.__.Documents})).uri}catch{}if(l)try{yield y.share({title:"Backup Km Rodados",text:"Backup dos dados do aplicativo Km Rodados.",url:l,dialogTitle:"Compartilhar backup"})}catch{}(yield i.toastCtrl.create({message:"ios"===d?"Backup salvo. Use o app Arquivos ou compartilhamento para acessar.":"Backup salvo. Use seu gerenciador de arquivos ou compartilhamento para acessar.",duration:2500,color:"success",position:"bottom"})).present()}catch(l){const _=d||navigator.platform||"desconhecida",k=navigator.userAgent||"";let b="";if(l&&"object"==typeof l)if(l.message)b=l.message;else try{b=JSON.stringify(l)}catch{b=String(l)}else b=String(l);const C="mensagem=".concat(b,"; plataforma=").concat(_,"; userAgent=").concat(k);yield(yield i.alertCtrl.create({header:"Erro ao exportar backup",message:"N\xe3o foi poss\xedvel exportar o backup.\n\n"+C,buttons:[{text:"Copiar erro",handler:(T=(0,u.A)(function*(){try{var j;yield null===(j=navigator.clipboard)||void 0===j?void 0:j.writeText(C)}catch{try{var F,M;null===(F=(M=window).prompt)||void 0===F||F.call(M,"Copiar detalhes do erro:",C)}catch{}}}),function(){return T.apply(this,arguments)})},{text:"OK",role:"cancel"}]})).present()}})()}triggerImport(){this.fileInput.nativeElement.click()}onFileSelected(i){var n=this;return(0,u.A)(function*(){const r=i.target.files[0];if(!r)return;const h=new FileReader;h.onload=function(){var d=(0,u.A)(function*(l){n.vehicleService.importBackup(l.target.result)?(yield n.toastCtrl.create({message:"Backup importado com sucesso!",duration:2e3,color:"success",position:"bottom"})).present():yield(yield n.alertCtrl.create({header:"Erro",message:"Falha ao importar backup. Arquivo inv\xe1lido.",buttons:["OK"]})).present(),n.fileInput.nativeElement.value=""});return function(l){return d.apply(this,arguments)}}(),h.readAsText(r)})()}confirmClearData(){var i=this;return(0,u.A)(function*(){yield(yield i.alertCtrl.create({header:"Apagar Tudo",message:"Tem certeza que deseja apagar TODOS os dados? Esta a\xe7\xe3o n\xe3o pode ser desfeita.",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Apagar",cssClass:"danger",handler:()=>{i.vehicleService.clearAllData(),i.showClearSuccessToast()}}]})).present()})()}showClearSuccessToast(){var i=this;return(0,u.A)(function*(){(yield i.toastCtrl.create({message:"Todos os dados foram apagados com sucesso.",duration:2e3,color:"success",position:"bottom"})).present()})()}}return(m=S).\u0275fac=function(i){return new(i||m)(e.rXU(R.K),e.rXU(g.hG),e.rXU(g.K_),e.rXU(w.g))},m.\u0275cmp=e.VBU({type:m,selectors:[["app-settings"]],viewQuery:function(i,n){if(1&i&&e.GBs(U,5),2&i){let r;e.mGM(r=e.lsd())&&(n.fileInput=r.first)}},standalone:!1,decls:76,vars:10,consts:[["fileInput",""],[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[3,"ionChange","value"],["button","","detail","false",3,"click"],["slot","start","name","settings-outline"],["slot","end","value","system"],["slot","start","name","sunny-outline"],["slot","end","value","light"],["slot","start","name","moon-outline"],["slot","end","value","dark"],["slot","start","name","color-palette-outline"],["slot","end",2,"font-weight","bold","margin-right","10px"],["slot","end",3,"name"],["class","color-scroll",4,"ngIf"],["lines","none"],["color","medium"],["disabled","false",3,"ionItemReorder"],["class","layout-item",4,"ngFor","ngForOf"],["button",""],["slot","start","name","information-circle-outline"],["slot","end"],["slot","start","name","document-text-outline"],[1,"ion-padding"],["expand","block","color","primary",1,"ion-margin-bottom","btn-contrast-primary",3,"click"],["slot","start","name","cloud-download-outline"],["type","file","accept",".json",2,"display","none",3,"change"],["expand","block","color","secondary","fill","solid",1,"ion-margin-bottom","btn-contrast-secondary",3,"click"],["slot","start","name","cloud-upload-outline"],["expand","block","color","danger","fill","solid",1,"btn-contrast-danger",3,"click"],["slot","start","name","trash-outline"],[1,"color-scroll"],["class","color-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"color-item",3,"click"],[1,"color-circle"],["name","checkmark-outline",3,"color",4,"ngIf"],["name","checkmark-outline"],[1,"layout-item"],["slot","start",3,"ionChange","checked"]],template:function(i,n){if(1&i){const r=e.RV6();e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Configura\xe7\xf5es"),e.k0s()()(),e.j41(4,"ion-content",2)(5,"ion-header",3)(6,"ion-toolbar")(7,"ion-title",4),e.EFF(8,"Configura\xe7\xf5es"),e.k0s()()(),e.j41(9,"ion-list")(10,"ion-radio-group",5),e.bIt("ionChange",function(d){return p.eBV(r),p.Njj(n.changeTheme(d))}),e.j41(11,"ion-list-header")(12,"ion-label"),e.EFF(13,"Tema"),e.k0s()(),e.j41(14,"ion-item",6),e.bIt("click",function(d){return p.eBV(r),p.Njj(n.selecionarTema("system",d))}),e.nrm(15,"ion-icon",7),e.j41(16,"ion-label"),e.EFF(17,"Sistema"),e.k0s(),e.nrm(18,"ion-radio",8),e.k0s(),e.j41(19,"ion-item",6),e.bIt("click",function(d){return p.eBV(r),p.Njj(n.selecionarTema("light",d))}),e.nrm(20,"ion-icon",9),e.j41(21,"ion-label"),e.EFF(22,"Claro"),e.k0s(),e.nrm(23,"ion-radio",10),e.k0s(),e.j41(24,"ion-item",6),e.bIt("click",function(d){return p.eBV(r),p.Njj(n.selecionarTema("dark",d))}),e.nrm(25,"ion-icon",11),e.j41(26,"ion-label"),e.EFF(27,"Escuro"),e.k0s(),e.nrm(28,"ion-radio",12),e.k0s()()(),e.j41(29,"ion-list")(30,"ion-list-header")(31,"ion-label"),e.EFF(32,"Personaliza\xe7\xe3o"),e.k0s()(),e.j41(33,"ion-item",6),e.bIt("click",function(){return p.eBV(r),p.Njj(n.toggleColorPicker())}),e.nrm(34,"ion-icon",13),e.j41(35,"ion-label"),e.EFF(36,"Cor do Tema"),e.k0s(),e.j41(37,"ion-note",14),e.EFF(38),e.k0s(),e.nrm(39,"ion-icon",15),e.k0s(),e.DNE(40,B,2,1,"div",16),e.k0s(),e.j41(41,"ion-list")(42,"ion-list-header")(43,"ion-label"),e.EFF(44,"Layout da Tela Inicial"),e.k0s()(),e.j41(45,"ion-item",17)(46,"ion-text",18),e.EFF(47,"Arraste para organizar a ordem dos cards na Home"),e.k0s()(),e.j41(48,"ion-reorder-group",19),e.bIt("ionItemReorder",function(d){return p.eBV(r),p.Njj(n.onReorder(d))}),e.DNE(49,L,5,2,"ion-item",20),e.k0s()(),e.j41(50,"ion-list")(51,"ion-list-header")(52,"ion-label"),e.EFF(53,"Sobre"),e.k0s()(),e.j41(54,"ion-item",21),e.nrm(55,"ion-icon",22),e.j41(56,"ion-label"),e.EFF(57,"Vers\xe3o do App"),e.k0s(),e.j41(58,"ion-note",23),e.EFF(59),e.k0s()(),e.j41(60,"ion-item",21),e.nrm(61,"ion-icon",24),e.j41(62,"ion-label"),e.EFF(63,"Termos de Uso"),e.k0s()()(),e.j41(64,"div",25)(65,"ion-button",26),e.bIt("click",function(){return p.eBV(r),p.Njj(n.downloadBackup())}),e.nrm(66,"ion-icon",27),e.EFF(67," Fazer Backup (Download) "),e.k0s(),e.j41(68,"input",28,0),e.bIt("change",function(d){return p.eBV(r),p.Njj(n.onFileSelected(d))}),e.k0s(),e.j41(70,"ion-button",29),e.bIt("click",function(){return p.eBV(r),p.Njj(n.triggerImport())}),e.nrm(71,"ion-icon",30),e.EFF(72," Importar Backup "),e.k0s(),e.j41(73,"ion-button",31),e.bIt("click",function(){return p.eBV(r),p.Njj(n.confirmClearData())}),e.nrm(74,"ion-icon",32),e.EFF(75," Apagar Todos os Dados "),e.k0s()()()}2&i&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(6),e.Y8G("value",n.themeMode),e.R7$(27),e.xc7("color",n.selectedColor),e.R7$(),e.SpI(" ",n.getSelectedColorName()," "),e.R7$(),e.Y8G("name",n.showColorPicker?"chevron-up-outline":"chevron-down-outline"),e.R7$(),e.Y8G("ngIf",n.showColorPicker),e.R7$(9),e.Y8G("ngForOf",n.homeCardsOrder),e.R7$(10),e.JRh(n.versao_app||"0.0.0"))},dependencies:[E.Sq,E.bT,g.Jm,g.W9,g.eU,g.iq,g.uz,g.he,g.nf,g.AF,g.JI,g.KO,g.f0,g.UB,g.p$,g.IO,g.BC,g.BY,g.ai,g.hB,g.Je],styles:[".color-scroll[_ngcontent-%COMP%]{display:flex;overflow-x:auto;padding:5px 16px 15px;gap:16px;-webkit-overflow-scrolling:touch;scrollbar-width:none}.color-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.color-item[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;flex-direction:column;align-items:center;cursor:pointer;transition:transform .2s ease}.color-item[_ngcontent-%COMP%]:active{transform:scale(.95)}.color-circle[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 5px #0000001a;transition:all .3s cubic-bezier(.175,.885,.32,1.275);border:2px solid transparent}.color-item.selected[_ngcontent-%COMP%]   .color-circle[_ngcontent-%COMP%]{transform:scale(1.15);box-shadow:0 4px 10px #00000040}.color-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px;opacity:0;transform:scale(0);transition:all .2s ease}.color-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.btn-contrast-secondary[_ngcontent-%COMP%]{--background: var(--ion-color-secondary);--color: var(--ion-color-secondary-contrast);--background-activated: var(--ion-color-secondary-shade);--background-hover: var(--ion-color-secondary-tint);--border-color: var(--ion-color-secondary)}.btn-contrast-danger[_ngcontent-%COMP%]{--background: var(--ion-color-danger);--color: var(--ion-color-danger-contrast);--background-activated: var(--ion-color-danger-shade);--background-hover: var(--ion-color-danger-tint);--border-color: var(--ion-color-danger)}.btn-contrast-secondary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-secondary-contrast)!important}.btn-contrast-danger[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-danger-contrast)!important}.btn-contrast-primary[_ngcontent-%COMP%]{--background: var(--ion-color-primary);--color: var(--ion-color-primary-contrast);--background-activated: var(--ion-color-primary-shade);--background-hover: var(--ion-color-primary-tint);--border-color: var(--ion-color-primary)}.btn-contrast-primary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)!important}.layout-item[_ngcontent-%COMP%]{--padding-start: 8px}.layout-item[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{margin-right:12px}"]}),S})()}];let G=(()=>{var m;class S{}return(m=S).\u0275fac=function(i){return new(i||m)},m.\u0275mod=e.$C({type:m}),m.\u0275inj=p.G2t({imports:[P.iI.forChild($),P.iI]}),S})(),z=(()=>{var m;class S{}return(m=S).\u0275fac=function(i){return new(i||m)},m.\u0275mod=e.$C({type:m}),m.\u0275inj=p.G2t({imports:[E.MD,x.YN,g.bv,G]}),S})()},1889(V,A,f){f.d(A,{Wi:()=>x,__:()=>E});var E=function(u){return u.Documents="DOCUMENTS",u.Data="DATA",u.Library="LIBRARY",u.Cache="CACHE",u.External="EXTERNAL",u.ExternalStorage="EXTERNAL_STORAGE",u.ExternalCache="EXTERNAL_CACHE",u.LibraryNoCloud="LIBRARY_NO_CLOUD",u.Temporary="TEMPORARY",u}(E||{}),x=function(u){return u.UTF8="utf8",u.ASCII="ascii",u.UTF16="utf16",u}(x||{})},8254(V,A,f){f.d(A,{Y:()=>P});var E=f(467);function P(u=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},void 0===window.Capacitor||u?void 0!==window.cordova&&function g(u){u.CapacitorUtils.Synapse=new Proxy({},{get:(I,a)=>u.cordova.plugins[a]})}(window):function x(u){u.CapacitorUtils.Synapse=new Proxy({},{get:(I,a)=>new Proxy({},{get:(t,s)=>(o,c,y)=>{const e=u.Capacitor.Plugins[a];void 0!==e?"function"==typeof e[s]?(0,E.A)(function*(){try{const p=yield e[s](o);c(p)}catch(p){y(p)}})():y(new Error("Method ".concat(s," not found in Capacitor plugin ").concat(a))):y(new Error("Capacitor plugin ".concat(a," not found")))}})})}(window))}},9198(V,A,f){f.d(A,{K:()=>g});var E=f(4412),x=f(2615);let g=(()=>{var P;class u{constructor(){this.vehicles=[],this.vehiclesSubject=new E.t([]),this.STORAGE_KEY="kmrodados_vehicles",this.loadVehicles()}loadVehicles(){const a=localStorage.getItem(this.STORAGE_KEY);a&&this.processLoadedVehicles(JSON.parse(a))}processLoadedVehicles(a){this.vehicles=a.map(t=>({...t,plate:t.plate?t.plate.toUpperCase():t.plate})),this.vehicles.forEach(t=>{t.supplies&&t.supplies.forEach(s=>{s.date=new Date(s.date),s.id||(s.id=this.generateId())}),t.consumptionHistory&&t.consumptionHistory.forEach(s=>{s.date=new Date(s.date),s.id||(s.id=this.generateId())}),t.maintenance&&t.maintenance.forEach(s=>{s.date=new Date(s.date),s.id||(s.id=this.generateId())})}),this.vehiclesSubject.next(this.vehicles)}importBackup(a){try{const t=JSON.parse(a);return!(!Array.isArray(t)||!t.every(o=>o.hasOwnProperty("plate")&&o.hasOwnProperty("model"))||(this.processLoadedVehicles(t),this.saveVehicles(),0))}catch(t){return console.error("Error importing backup:",t),!1}}clearAllData(){this.vehicles=[],this.vehiclesSubject.next(this.vehicles),localStorage.removeItem(this.STORAGE_KEY)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}saveVehicles(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.vehicles))}getVehicles(){return this.vehiclesSubject.asObservable()}addVehicle(a){const t=a.plate.toUpperCase();a.plate=t,0===this.vehicles.length&&(a.isDefault=!0),a.createdAt||(a.createdAt=Date.now()),this.vehicles.push({...a,supplies:[]}),this.vehiclesSubject.next(this.vehicles),this.saveVehicles()}setDefaultVehicle(a){const t=a.toUpperCase();let s=!1;this.vehicles.forEach(o=>{o.plate===t?o.isDefault||(o.isDefault=!0,s=!0):o.isDefault&&(o.isDefault=!1,s=!0)}),s&&(this.vehiclesSubject.next(this.vehicles),this.saveVehicles())}addConsumptionRecord(a,t){const s=a.toUpperCase(),o=this.vehicles.find(c=>c.plate===s);return!!o&&(o.consumptionHistory||(o.consumptionHistory=[]),t.id||(t.id=this.generateId()),t.createdAt||(t.createdAt=Date.now()),o.consumptionHistory.push(t),this.vehiclesSubject.next([...this.vehicles]),this.saveVehicles(),!0)}updateVehicle(a,t){const s=a.toUpperCase(),o=t.plate.toUpperCase();t.plate=o;const c=this.vehicles.findIndex(y=>y.plate===s);if(-1!==c){const y=this.vehicles[c].supplies||[];this.vehicles[c]={...t,supplies:y},this.vehiclesSubject.next(this.vehicles),this.saveVehicles()}}deleteVehicle(a){const t=a.toUpperCase(),s=this.vehicles.findIndex(o=>o.plate===t);-1!==s&&(this.vehicles.splice(s,1),this.vehiclesSubject.next(this.vehicles),this.saveVehicles())}addSupply(a,t){const s=a.toUpperCase(),o=this.vehicles.find(c=>c.plate===s);return o?(o.supplies||(o.supplies=[]),t.id||(t.id=this.generateId()),t.createdAt||(t.createdAt=Date.now()),o.supplies.push(t),this.vehiclesSubject.next([...this.vehicles]),this.saveVehicles(),!0):(console.error("Vehicle not found for plate:",s),!1)}addTrip(a,t){const s=a.toUpperCase(),o=this.vehicles.find(c=>c.plate===s);return o?(o.trips||(o.trips=[]),t.id||(t.id=this.generateId()),t.createdAt||(t.createdAt=Date.now()),o.trips.push(t),this.vehiclesSubject.next([...this.vehicles]),this.saveVehicles(),!0):(console.error("Vehicle not found for plate:",a),!1)}addMaintenance(a,t){const s=a.toUpperCase(),o=this.vehicles.find(c=>c.plate===s);return!!o&&(o.maintenance||(o.maintenance=[]),t.id||(t.id=this.generateId()),t.createdAt||(t.createdAt=Date.now()),o.maintenance.push(t),this.vehiclesSubject.next([...this.vehicles]),this.saveVehicles(),!0)}removerAbastecimento(a,t){const s=a.toUpperCase(),o=this.vehicles.find(c=>c.plate===s);if(o&&o.supplies){const c=o.supplies.findIndex(y=>y.id===t);if(-1!==c)return o.supplies.splice(c,1),this.vehiclesSubject.next([...this.vehicles]),this.saveVehicles(),!0}return!1}removerManutencao(a,t){const s=a.toUpperCase(),o=this.vehicles.find(c=>c.plate===s);if(o&&o.maintenance){const c=o.maintenance.findIndex(y=>y.id===t);if(-1!==c)return o.maintenance.splice(c,1),this.vehiclesSubject.next([...this.vehicles]),this.saveVehicles(),!0}return!1}updateSupply(a,t){const s=a.toUpperCase(),o=this.vehicles.find(c=>c.plate===s);if(o&&o.supplies){const c=o.supplies.findIndex(y=>y.id===t.id);if(-1!==c)return o.supplies[c]=t,this.vehiclesSubject.next(this.vehicles),this.saveVehicles(),!0}return!1}updateMaintenance(a,t){const s=a.toUpperCase(),o=this.vehicles.find(c=>c.plate===s);if(o&&o.maintenance){const c=o.maintenance.findIndex(y=>y.id===t.id);if(-1!==c)return o.maintenance[c]=t,this.vehiclesSubject.next(this.vehicles),this.saveVehicles(),!0}return!1}updateConsumptionRecord(a,t){const s=a.toUpperCase(),o=this.vehicles.find(c=>c.plate===s);if(o&&o.consumptionHistory){const c=o.consumptionHistory.findIndex(y=>y.id===t.id);if(-1!==c)return o.consumptionHistory[c]=t,this.vehiclesSubject.next(this.vehicles),this.saveVehicles(),!0}return!1}updateTrip(a,t){const s=a.toUpperCase(),o=this.vehicles.find(c=>c.plate===s);if(o&&o.trips){const c=o.trips.findIndex(y=>y.id===t.id);if(-1!==c)return o.trips[c]=t,this.vehiclesSubject.next(this.vehicles),this.saveVehicles(),!0}return!1}getVehicleTypeName(a){return{car:"Carro",motorcycle:"Moto",truck:"Caminh\xe3o",bus:"\xd4nibus",van:"Van"}[a]||a}getVehicleIcon(a){switch(a){case"car":default:return"car-sport-outline";case"motorcycle":return"moto-custom";case"truck":return"truck-heavy";case"bus":return"bus-outline";case"van":return"car-outline"}}}return(P=u).\u0275fac=function(a){return new(a||P)},P.\u0275prov=x.jDH({token:P,factory:P.\u0275fac,providedIn:"root"}),u})()}}]);